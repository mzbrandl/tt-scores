(this["webpackJsonptt-scores"]=this["webpackJsonptt-scores"]||[]).push([[0],{129:function(e,t,a){e.exports={App:"App_App__333Fr"}},146:function(e,t,a){e.exports=a(281)},151:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),c=(a(151),a(138)),i=a(18),s=a(98),u=a.n(s);a(152);u.a.initializeApp({apiKey:"AIzaSyCzZBaZdVwZ9dj_wqJ2cum1LfXVh0ucEFk",authDomain:"tt-scores-1595920568034.firebaseapp.com",databaseURL:"https://tt-scores-1595920568034.firebaseio.com",projectId:"tt-scores-1595920568034",storageBucket:"tt-scores-1595920568034.appspot.com",messagingSenderId:"429581450020",appId:"1:429581450020:web:b9b8fe7c58c9bcc8ff91b1"});var m=u.a,d=a(129),p=a.n(d),f=a(304),E=a(306),b=a(314),v=a(307),g=a(38),h=a.n(g);function w(e){var t=e.players,a=n.useState(""),r=Object(i.a)(a,2),l=r[0],o=r[1],c=n.useState(""),s=Object(i.a)(c,2),u=s[0],d=s[1],p=Object(f.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:200,backgroundColor:"white",borderRadius:4},selectEmpty:{marginTop:e.spacing(2)}}}))();return n.createElement("div",{className:h.a.demoWrapper},n.createElement("div",{className:h.a.addGame},n.createElement("h2",{className:h.a.label},"Winner"),n.createElement("div",null),n.createElement("h2",{className:h.a.label},"Looser"),n.createElement(E.a,{variant:"outlined",className:p.formControl},n.createElement(b.a,{native:!0,value:l,onChange:function(e){return o(e.target.value)}},n.createElement("option",{value:""},"Select player"),t.filter((function(e){return!u||e!==u})).map((function(e,t){return n.createElement("option",{key:t,value:e},e)})))),n.createElement("h2",null,"VS"),n.createElement(E.a,{variant:"outlined",className:p.formControl},n.createElement(b.a,{native:!0,value:u,onChange:function(e){return d(e.target.value)}},n.createElement("option",{value:""},"Select player"),t.filter((function(e){return!l||e!==l})).map((function(e,t){return n.createElement("option",{key:t,value:e},e)})))),n.createElement("div",{className:h.a.submit},n.createElement(v.a,{className:h.a.button,color:"primary",variant:"contained",onClick:function(){var e={winner:l,looser:u,date:Date.now()};m.firestore().collection("games").add(e),o(""),d("")},disabled:!(l&&u)},"Save Game"))))}var y=a(308),S=a(309),_=a(310),C=a(311),k=a(312),j=a(313),O=a(315),A=a(135),W=a.n(A),N=a(133),P=a(134),G=a.n(P),x=Object(f.a)({table:{maxWidth:600,margin:"auto"}});function T(e){var t=e.games,a=null===t||void 0===t?void 0:t.sort((function(e,t){return t.date-e.date})),r=x(),l=n.useState(0),o=Object(i.a)(l,2),c=o[0],s=o[1],u=n.useState(5),m=Object(i.a)(u,2),d=m[0],p=m[1];Math.min(d,(null===a||void 0===a?void 0:a.length)-c*d);return n.createElement(n.Fragment,null,n.createElement("h3",null,"Latest games"),n.createElement(y.a,{className:r.table,size:"small","aria-label":"simple table"},n.createElement(S.a,null,n.createElement(_.a,null,n.createElement(C.a,null,n.createElement("b",null,"Date")),n.createElement(C.a,null,n.createElement("b",null,"Winner")),n.createElement(C.a,null,n.createElement("b",null,"Looser")),n.createElement(C.a,null))),n.createElement(k.a,null,(d>0?null===a||void 0===a?void 0:a.slice(c*d,c*d+d):a).map((function(e){return n.createElement(_.a,{key:e.date},n.createElement(C.a,{component:"th",scope:"row"},new Date(e.date).toLocaleString()),n.createElement(C.a,null,e.winner),n.createElement(C.a,null,e.looser),n.createElement(C.a,null,n.createElement("a",{onClick:function(){return function(e){Object(N.confirmAlert)({title:"Delete game",message:"Are you sure you want to delete ".concat(e.winner," vs. ").concat(e.looser," on ").concat(new Date(e.date).toLocaleDateString(),"?"),buttons:[{label:"Delete",onClick:function(){return G.a.firestore().collection("games").doc(e.id).delete()}},{label:"Cancel",onClick:function(){}}]})}(e)},style:{cursor:"pointer",padding:".5em"}},"X")))}))),n.createElement(j.a,null,n.createElement(_.a,null,n.createElement(O.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:null===a||void 0===a?void 0:a.length,rowsPerPage:d,page:c,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){p(parseInt(e.target.value,10)),s(0)},ActionsComponent:W.a})))))}var L=a(136),D=a(81),I=a.n(D);function z(e){var t=e.games,a=e.players,r=Object(n.useState)(""),l=Object(i.a)(r,2),o=l[0],c=l[1],s=function(e,t,a){var n=a.filter((function(e){return e!==t})).map((function(a){return e.reduce((function(e,n){return t===n.winner&&a===n.looser&&e++,e}),0)})),r=a.filter((function(e){return e!==t})).map((function(a){return e.reduce((function(e,n){return t===n.looser&&a===n.winner&&e++,e}),0)}));return{labels:a.filter((function(e){return e!==t})),datasets:[{label:"Wins",backgroundColor:"rgb(78, 207, 192)",barThickness:"flex",data:n},{label:"Losses",backgroundColor:"rgb(207, 168, 78)",barThickness:"flex",data:r}]}}(t,o,a),u=function(e,t){var a=e.reduce((function(e,a){return t===a.winner&&e++,e}),0),n=e.reduce((function(e,a){return t===a.looser&&e++,e}),0);return{wins:a,losses:n,total:a+n,quota:0!==n?a/n:0}}(t,o),m=Object(f.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:200,backgroundColor:"white",borderRadius:4},selectEmpty:{marginTop:e.spacing(2)}}}))();return n.createElement(n.Fragment,null,n.createElement("h3",null,"Player stats"),n.createElement("div",{className:I.a.playerStats},n.createElement("div",{className:I.a.row},n.createElement(E.a,{variant:"outlined",className:m.formControl},n.createElement(b.a,{native:!0,value:o,onChange:function(e){c(e.target.value),setTimeout((function(){return window.scrollTo(0,document.body.scrollHeight)}),100)}},n.createElement("option",{value:""},"Select player"),a.map((function(e,t){return n.createElement("option",{key:t,value:e},e)})))),o&&n.createElement("div",{className:I.a.statGrid},n.createElement("div",null,"Wins: ",u.wins),n.createElement("div",null,"Total: ",u.total),n.createElement("div",null,"Losses: ",u.losses),n.createElement("div",null,"Quota: ",u.quota.toFixed(2)))),o&&n.createElement(L.a,{data:s,width:600,options:{maintainAspectRatio:!1}})))}var B=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){m.firestore().collection("games").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(c.a)({id:e.id},e.data())}));l(t)})),m.firestore().collection("players").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data().name})).sort((function(e,t){return e.localeCompare(t)}));d(t)}))}),[]),r.a.createElement("div",{className:p.a.App},r.a.createElement("h1",null,"TT-Scores"),r.a.createElement(w,{players:u}),r.a.createElement(T,{games:a}),r.a.createElement(z,{games:a,players:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},38:function(e,t,a){e.exports={addGame:"AddGame_addGame__SXKXH",label:"AddGame_label__1WXOB",submit:"AddGame_submit__2cHjd",button:"AddGame_button__Sk9u9",demoWrapper:"AddGame_demoWrapper__1d-nE"}},81:function(e,t,a){e.exports={playerStats:"PlayerStats_playerStats__2pTaz",row:"PlayerStats_row__24thP",statGrid:"PlayerStats_statGrid__2ufms"}}},[[146,1,2]]]);
//# sourceMappingURL=main.26479b0a.chunk.js.map